# 4DC — 4-Document, Prompt-Driven Incremental Development

Prompt-driven workflow for incremental, evolutionary software development supported by AI.

## Downloading and Using 4DC Files

You can quickly copy the canonical prompts or template files for your own project using:

```sh
# Download a single file (example: constitution prompt)
wget https://raw.githubusercontent.com/co0p/4dc/main/create-constitution.prompt.md

# Download the whole repository
git clone https://github.com/co0p/4dc.git

# Add as a submodule
git submodule add https://github.com/co0p/4dc.git vendor/4dc
```

Copy the relevant `.prompt.md` files from the repo or submodule into your own project for reproducible, prompt-driven generation.

---

## Document Flow and Dependencies

The 4DC workflow enforces separation and clarity—a cascade of documents, each answering a specific question and informing the next:

| Phase        | Artifact                   | Focus (WHY/WHAT/HOW/DO/LEARN)  | Generated By Prompt               | Produces / Promotes                          | Informs                      |
|--------------|----------------------------|--------------------------------|----------------------------------|----------------------------------------------|------------------------------|
| Constitution | `CONSTITUTION.md`          | WHY                            | `create-constitution.prompt.md`  | Principles & constraints                     | All subsequent phases        |
| Increment    | `increment.md`             | WHAT                           | `increment.prompt.md`            | Goal / hypothesis / PRD                      | Design, Implement            |
| Design       | `design.md` (mandatory)    | HOW                            | `design.prompt.md`               | Technical approach & boundaries              | Implement, Improve           |
| Implement    | Implementation plan        | DO                             | `implement.prompt.md`            | Task breakdown & execution guidance          | Improve                      |
| Improve / ADR| `improve.md`, `adr-*.md`   | LEARN                          | `improve.prompt.md`              | Lessons, refactors, ADR suggestions & records| Next increments & designs    |

- The **Constitution** sets immutable principles and constraints (WHY).
- Each **Increment** states a new hypothesis/goal (WHAT), always framed by the constitution.
- **Design** is mandatory and produced via the Design prompt (`design.prompt.md`); it establishes approach and boundaries (HOW) before implementation.
- **Implementation** plan is generated by the Implement prompt (`implement.prompt.md`) and then executed (DO).
- **Improve** prompt (`improve.prompt.md`) extracts learnings, recommends refactors, and promotes decisions into ADRs (LEARN). ADRs are only created here.

## Prompt → Artifact Mapping

| Prompt File                          | Output Artifact(s)                               | Purpose                                                            |
|--------------------------------------|--------------------------------------------------|--------------------------------------------------------------------|
| `create-constitution.prompt.md`      | `CONSTITUTION.md`                                | Establish foundational principles (WHY)                            |
| `increment.prompt.md`                | `increment.md`                                   | Define feature scope / PRD / goal (WHAT)                           |
| `design.prompt.md`                   | `design.md`                                      | Generate technical approach & boundaries (HOW)                     |
| `implement.prompt.md`                | Implementation plan (tasks/checklists)           | Break work into actionable steps (DO)                              |
| `improve.prompt.md`                  | `improve.md`, `adr-*.md`                         | Capture lessons, refactors, record decisions (LEARN)               |

Design documents (`design.md`) are optional and may be authored manually when additional architectural reasoning is needed before implementation.

All documents are generated/promoted by their corresponding prompt files in this repository.

---

## Quick Start (End-to-End Generation Sequence)

Generate a new feature or change by progressing through the mandatory prompts in order. Each step feeds prior artifacts back into the next prompt for contextual continuity.

1. Constitution (run once per project)
	```sh
	# Review / adapt the constitution prompt
	cat create-constitution.prompt.md
	# Feed to your LLM, save result as:
	# CONSTITUTION.md
	```
2. Increment (define goal / PRD)
	```sh
	cat increment.prompt.md
	# Provide goal, constraints, link back to CONSTITUTION.md
	# Save result as increment.md
	```
3. Design (mandatory technical approach)
	```sh
	cat design.prompt.md
	# Provide increment.md + CONSTITUTION.md as context
	# Save result as design.md
	```
4. Implement (execution plan)
	```sh
	cat implement.prompt.md
	# Provide design.md, increment.md, CONSTITUTION.md
	# Save plan as implement.md and execute tasks
	```
5. Improve (reflection + ADRs)
	```sh
	cat improve.prompt.md
	# Provide code diffs, implement.md, design.md
	# Save result as improve.md; extract any adr-* decisions
	```

### Minimal Loop for Subsequent Features
After the initial constitution:
```
increment → design → implement → improve
```

### Tips
- Always include prior artifacts (constitution, increment, design) when invoking the next prompt for maximal alignment.
- Keep ADR filenames consistent: `adr-short-title.md` in a dedicated docs or adr folder.
- If design changes mid-implementation, regenerate `design.md` (version it) before continuing.

---

## Examples

Explore working examples:

- [`examples/todo/`](examples/todo) — Minimal browser todo app.
- [`examples/epicsum/`](examples/epicsum) — Bash-based time tracking.
- [`examples/shareit/`](examples/shareit) — Svelte project setup.

Each example directory shows the real flow: from constitution, through increments and design, to implementation and improvement.

## References and Inspiration

4DC draws on work and ideas from:

- Martin Fowler (architecture, refactoring)
- Kent Beck (incremental development, TDD)
- Mary & Tom Poppendieck (Lean Software)
- Robert C. Martin (Clean Architecture, separation of concerns)
- Michael Feathers, Rebecca Wirfs-Brock, Eric Evans, Sandi Metz, Dave Thomas & Andy Hunt
- Gherkin-style acceptance criteria, BDD



## Editing Prompts

Prompts live in repository folders such as `.prompt/` and `.github/prompts/`.

Usage (manual):

- Open a prompt file in VS Code or another editor (for example: `code .prompt/create-constitution.prompt.md`).
- Copy the prompt text into your preferred Chat or LLM interface when you want to run it.


### generation

each prompt has it's corresponding folder of supporting artifacts under /templates

### template files

- persona - describes the persona the prompt should impersonate
- process - defines the process the llm should follow
- output - defines the structure of the output
- frontmatter - gives context for ide integration
- generate - is the prompt to generate the final prompt
- interaction - defines the interaction style and examples of questions
- additional files such as pillars.md or lenses.md give more context


